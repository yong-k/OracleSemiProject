SELECT USER 
FROM DUAL;
--==>> TEAM1

--------------------------------------------------------------------------------
-- 교수 테이블 (TBL_PROFESSOR)
CREATE TABLE TBL_PROFESSOR
( PROFNO    VARCHAR2(20)            CONSTRAINT PROFESSOR_PROFNO_NN  NOT NULL    
, NAME      VARCHAR2(50)            CONSTRAINT PROFESSOR_NAME_NN    NOT NULL
, SSN       CHAR(13)                CONSTRAINT PROFESSOR_SSN_NN     NOT NULL
, PW        VARCHAR2(20)            CONSTRAINT PROFESSOR_PW_NN      NOT NULL
, REGDATE   DATE DEFAULT SYSDATE    CONSTRAINT PROFESSOR_REGDATE_NN NOT NULL
, CONSTRAINT PROFESSOR_PROFNO_PK    PRIMARY KEY(PROFNO)
);
--==>> Table TBL_PROFESSOR이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_PROFESSOR
VALUES('P0001', '우수정', '9603292234567', '0000', TO_DATE('2002-10-01', 'YYYY-MM-DD'));
INSERT INTO TBL_PROFESSOR
VALUES('P0002', '이아린', '9911172234567', '0000', TO_DATE('2001-11-01', 'YYYY-MM-DD'));
INSERT INTO TBL_PROFESSOR
VALUES('P0003', '이호석', '9611121234567', '0000', TO_DATE('2004-12-01', 'YYYY-MM-DD'));
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_PROFESSOR_INSERT('장인철', '7712121022432');
EXEC PRC_PROFESSOR_INSERT('홍길동', '8010071544236');
EXEC PRC_PROFESSOR_INSERT('이상헌', '7709222312547');
EXEC PRC_PROFESSOR_INSERT('김인수', '7903041788896');
EXEC PRC_PROFESSOR_INSERT('유영희', '8111121566789');
EXEC PRC_PROFESSOR_INSERT('조미숙', '7805052978541');
EXEC PRC_PROFESSOR_INSERT('우재옥', '7805061625148');
EXEC PRC_PROFESSOR_INSERT('김미나', '7510101122233');
EXEC PRC_PROFESSOR_INSERT('이정석', '7609091333333');
EXEC PRC_PROFESSOR_INSERT('양미옥', '8006062954687');
EXEC PRC_PROFESSOR_INSERT('허경운', '7810101666678');



SELECT *
FROM TBL_PROFESSOR;

COMMIT;


--------------------------------------------------------------------------------
-- 학생 테이블 (TBL_STUDENT)
CREATE TABLE TBL_STUDENT
( STUDNO        VARCHAR2(20)    CONSTRAINT STUDENT_STUDNO_NN  NOT NULL
, NAME          VARCHAR2(50)    CONSTRAINT STUDENT_NAME_N     NOT NULL
, SSN           CHAR(13)        CONSTRAINT STUDENT_SSN_NN     NOT NULL
, PW            VARCHAR2(20)    CONSTRAINT STUDENT_PW_NN      NOT NULL
, REGDATE       DATE            DEFAULT SYSDATE
                                CONSTRAINT STUDENT_REGDATE_NN NOT NULL
, CONSTRAINT STUDENT_STUDNO_PK PRIMARY KEY(STUDNO)
);
--==>> Table TBL_STUDENT이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_STUDENT
VALUES('1111111', '김정용', '9606082234567', '1234', TO_DATE('2020-01-29', 'YYYY-MM-DD'));
INSERT INTO TBL_STUDENT
VALUES('2222222', '이시우', '9605152234567', '1234', TO_DATE('2022-03-14', 'YYYY-MM-DD'));
INSERT INTO TBL_STUDENT
VALUES('3333333', '김상기', '9610041234567', '1234', TO_DATE('2019-05-07', 'YYYY-MM-DD'));
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_STUDENT_INSERT('김신애', '8108092111111');
EXEC PRC_STUDENT_INSERT('임수봉', '8108092121244');
EXEC PRC_STUDENT_INSERT('김신제', '8007091321456');
EXEC PRC_STUDENT_INSERT('이미경', '7804062003214');
EXEC PRC_STUDENT_INSERT('전용재', '8006051456987');
EXEC PRC_STUDENT_INSERT('정한나', '8205062425153');
EXEC PRC_STUDENT_INSERT('정상호', '8107051212141');
EXEC PRC_STUDENT_INSERT('김상식', '8007151313131');
EXEC PRC_STUDENT_INSERT('권옥경', '8204062000456');
EXEC PRC_STUDENT_INSERT('권영미', '7903032155554');
EXEC PRC_STUDENT_INSERT('이미인', '8104032828287');
EXEC PRC_STUDENT_INSERT('이미성', '8309082456548');
EXEC PRC_STUDENT_INSERT('이기상', '7906041415141');
EXEC PRC_STUDENT_INSERT('지수환', '7805051234567');
EXEC PRC_STUDENT_INSERT('산마루', '7601051458752');

SELECT *
FROM TBL_STUDENT;

COMMIT;

--------------------------------------------------------------------------------
-- 관리자 테이블 (TBL_ADMIN)
CREATE TABLE TBL_ADMIN
( ID        VARCHAR2(20)    CONSTRAINT ADMIN_ID_NN      NOT NULL
, PW        VARCHAR2(20)    CONSTRAINT ADMIN_PW_NN      NOT NULL
, NAME      VARCHAR2(50)    CONSTRAINT ADMIN_NAME_NN    NOT NULL
, REGDATE   DATE            DEFAULT SYSDATE             CONSTRAINT ADMIN_REGDATE_NN NOT NULL 
, CONSTRAINT ADMIN_ID_PK    PRIMARY KEY(ID)
);
--==>> Table TBL_ADMIN이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_ADMIN(ID, PW, NAME, REGDATE)
VALUES('team1_1', '1234', '관리자', SYSDATE);
INSERT INTO TBL_ADMIN(ID, PW, NAME, REGDATE)
VALUES('team1_2', '0000', '운영자', SYSDATE);
--==>> 1 행 이(가) 삽입되었습니다.

SELECT *
FROM TBL_ADMIN;

COMMIT;

--------------------------------------------------------------------------------
-- 과정 테이블 (TBL_COURSE)
CREATE TABLE TBL_COURSE
( COURSE_CODE   VARCHAR2(20)     CONSTRAINT COURSE_CODE_NN   NOT NULL   
, NAME          VARCHAR2(100)    CONSTRAINT COURSE_NAME_NN   NOT NULL
, CONSTRAINT COURSE_CODE_PK      PRIMARY KEY(COURSE_CODE)
);
--==>> Table TBL_COURSE이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_COURSE
VALUES('JAVA001', 'JAVA로 시작하는 코딩과정');
INSERT INTO TBL_COURSE
VALUES('PYTHON001', '기초부터 시작하는 파이썬 과정');
INSERT INTO TBL_COURSE
VALUES('ORA001', '오라클의 모든 것을 배우는 과정');
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_COURSE_INSERT('DO IT 파이썬');
EXEC PRC_COURSE_INSERT('3달이면 나도 토익 만점');
EXEC PRC_COURSE_INSERT('중국어 회화');
EXEC PRC_COURSE_INSERT('일본어 회화');
EXEC PRC_COURSE_INSERT('데이터베이스');
EXEC PRC_COURSE_INSERT('웹프로그래밍 입문');
EXEC PRC_COURSE_INSERT('한국사');

SELECT * 
FROM TBL_COURSE;

COMMIT;


--------------------------------------------------------------------------------
-- 개설과정 테이블 (TBL_OPENCOURSE)
CREATE TABLE TBL_OPENCOURSE
( OPENCOURSE_CODE   VARCHAR2(20)    CONSTRAINT OPENCOURSE_CODE_NN           NOT NULL
, STARTDATE         DATE            CONSTRAINT OPENCOURSE_STARTDATE_NN      NOT NULL
, ENDDATE           DATE            CONSTRAINT OPENCOURSE_ENDDATE_NN        NOT NULL
, OPENCOURSE_DATE   DATE            CONSTRAINT OPENCOURSE_DATE_NN           NOT NULL
, PROFNO            VARCHAR2(20)    CONSTRAINT OPENCOURSE_PROFNO_NN         NOT NULL
, COURSE_CODE       VARCHAR2(20)    CONSTRAINT OPENCOURSE_COURSE_CODE_NN    NOT NULL
, CLASSROOM_CODE    VARCHAR2(20)    CONSTRAINT OPENCOURSE_CLASSROOM_CODE_NN NOT NULL
, CONSTRAINT OPENCOURSE_CODE_PK PRIMARY KEY(OPENCOURSE_CODE)
);
--==>> Table TBL_OPENCOURSE이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_OPENCOURSE
VALUES('OPJAVA001', TO_DATE('2022-03-01', 'YYYY-MM-DD'), TO_DATE('2022-08-20', 'YYYY-MM-DD'), TO_DATE('2022-01-02', 'YYYY-MM-DD'), 'P0001', 'JAVA001', 'A101');
INSERT INTO TBL_OPENCOURSE
VALUES('OPORA001', TO_DATE('2022-03-02', 'YYYY-MM-DD'), TO_DATE('2022-06-20', 'YYYY-MM-DD'), TO_DATE('2021-12-30', 'YYYY-MM-DD'), 'P0002', 'ORA001', 'A201');
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_OPENCOURSE_INSERT('2022-04-01', '2022-06-28', SYSDATE, 'P0007', 'CO0004', 'C101');
EXEC PRC_OPENCOURSE_INSERT('2022-03-22', '2022-06-01', SYSDATE, 'P0008', 'CO0005', 'C102');
EXEC PRC_OPENCOURSE_INSERT('2022-01-01', '2022-03-20', SYSDATE, 'P0007', 'CO0007', 'B101');
EXEC PRC_OPENCOURSE_INSERT('2022-06-23', '2022-08-22', SYSDATE, 'P0008', 'CO0009', 'A201');

SELECT *
FROM TBL_OPENCOURSE;

COMMIT;
--------------------------------------------------------------------------------
-- 과목 테이블 (TBL_SUBJECT)
CREATE TABLE TBL_SUBJECT
( SUBJECT_CODE              VARCHAR2(20)     CONSTRAINT SUBJECT_CODE_NN NOT NULL
, NAME                      VARCHAR2(100)    CONSTRAINT SUBJECT_NAME_NN NOT NULL
, CONSTRAINT SUBJECT_CODE_PK PRIMARY KEY(SUBJECT_CODE)
);
--==>> Table TBL_SUBJECT이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_SUBJECT
VALUES('SJAVA001', '자바 기초');
INSERT INTO TBL_SUBJECT
VALUES('SJAVA002', '자바 중급');
INSERT INTO TBL_SUBJECT
VALUES('SJAVA003', '자바 심화');
INSERT INTO TBL_SUBJECT
VALUES('SORA001', '오라클 입문');
INSERT INTO TBL_SUBJECT
VALUES('SORA002', '오라클 중급');
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_SUBJECT_INSERT('오라클 심화');
EXEC PRC_SUBJECT_INSERT('파이썬 입문');
EXEC PRC_SUBJECT_INSERT('파이썬 중급');
EXEC PRC_SUBJECT_INSERT('파이썬 응용');
EXEC PRC_SUBJECT_INSERT('토익 700');
EXEC PRC_SUBJECT_INSERT('토익 800');
EXEC PRC_SUBJECT_INSERT('토익 900');
EXEC PRC_SUBJECT_INSERT('중국어회화 입문');
EXEC PRC_SUBJECT_INSERT('중국어회화 기초');
EXEC PRC_SUBJECT_INSERT('중국어회화 중급');
EXEC PRC_SUBJECT_INSERT('일본어회화 입문');
EXEC PRC_SUBJECT_INSERT('일본어회화 기초');
EXEC PRC_SUBJECT_INSERT('일본어회화 중급');
EXEC PRC_SUBJECT_INSERT('데이터베이스');
EXEC PRC_SUBJECT_INSERT('데이터베이스설계');
EXEC PRC_SUBJECT_INSERT('데이터베이스프로그래밍');
EXEC PRC_SUBJECT_INSERT('HTML');
EXEC PRC_SUBJECT_INSERT('CSS');
EXEC PRC_SUBJECT_INSERT('자바스크립트');
EXEC PRC_SUBJECT_INSERT('한국사(상)');
EXEC PRC_SUBJECT_INSERT('한국사(하)');

SELECT *
FROM TBL_SUBJECT;

COMMIT;

--------------------------------------------------------------------------------
-- 개설과목 테이블 (TBL_OPENSUBJECT)
CREATE TABLE TBL_OPENSUBJECT
( OPENSUBJECT_CODE  VARCHAR2(20)            CONSTRAINT OPENSUBJECT_CODE_NN            NOT NULL
, STARTDATE         DATE                    CONSTRAINT OPENSUBJECT_STARTDATE_NN       NOT NULL
, ENDDATE           DATE                    CONSTRAINT OPENSUBJECT_ENDDATE_NN         NOT NULL
, OPENSUBJECT_DATE  DATE DEFAULT SYSDATE    CONSTRAINT OPENSUBJECT_DATE_NN            NOT NULL
, ATTEND            NUMBER(3) DEFAULT 0     CONSTRAINT OPENSUBJECT_ATTEND_CK          CHECK(ATTEND   BETWEEN 0 AND 100)
, PRACTICE          NUMBER(3) DEFAULT 0     CONSTRAINT OPENSUBJECT_PRACTICE_CK        CHECK(PRACTICE BETWEEN 0 AND 100)
, WRITE             NUMBER(3) DEFAULT 0     CONSTRAINT OPENSUBJECT_WRITE_CK           CHECK(WRITE    BETWEEN 0 AND 100)
, OPENCOURSE_CODE   VARCHAR2(20)            CONSTRAINT OPENSUBJECT_OPENCOURSE_CODE_NN NOT NULL
, SUBJECT_CODE      VARCHAR2(20)            CONSTRAINT OPENSUBJECT_SUBJECT_CODE_NN    NOT NULL
, BOOK_CODE         VARCHAR2(20)            CONSTRAINT OPENSUBJECT_BOOK_CODE_NN       NOT NULL
, CONSTRAINT OPENSUBJECT_CODE_PK PRIMARY KEY(OPENSUBJECT_CODE) 
);
--==>> Table TBL_OPENSUBJECT이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_OPENSUBJECT
VALUES('OPSJAVA001', TO_DATE('2022-03-01', 'YYYY-MM-DD'), TO_DATE('2022-03-31', 'YYYY-MM-DD')
      , TO_DATE('2022-01-02', 'YYYY-MM-DD'), NULL, NULL, NULL, 'OPJAVA001', 'SJAVA001', 'J001');
INSERT INTO TBL_OPENSUBJECT
VALUES('OPSORA001', TO_DATE('2022-03-02', 'YYYY-MM-DD'), TO_DATE('2022-04-02', 'YYYY-MM-DD')
      , TO_DATE('2021-12-30', 'YYYY-MM-DD'), NULL, NULL, NULL, 'OPORA001', 'SORA001', 'O001');
--==>> 1 행 이(가) 삽입되었습니다.
SELECT *
FROM TBL_SUBJECT;
SELECT *
FROM TBL_OPENSUBJECT;

COMMIT;


--------------------------------------------------------------------------------
-- 수강신청 (TBL_SIGNCOURSE)
CREATE TABLE TBL_SIGNCOURSE
( SIGNCOURSE_CODE   NUMBER          CONSTRAINT SIGNCOURSE_CODE_NN            NOT NULL -- 시퀀스 사용        
, SIGNCOURSE_DATE   DATE            CONSTRAINT SIGNCOURSE_DATE_NN            NOT NULL
, STUDNO            VARCHAR2(20)    CONSTRAINT SIGNCOURSE_STUDNO_NN          NOT NULL
, OPENCOURSE_CODE   VARCHAR2(20)    CONSTRAINT SIGNCOURSE_OPENCOURSE_CODE_NN NOT NULL
, CONSTRAINT SIGNCOURSE_CODE_PK PRIMARY KEY(SIGNCOURSE_CODE)
);
--==>> Table TBL_SIGNCOURSE이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_SIGNCOURSE
VALUES(SEQ_SIGNCOURSE.NEXTVAL, TO_DATE('2022-01-25', 'YYYY-MM-DD'), '1111111', 'OPJAVA001');
INSERT INTO TBL_SIGNCOURSE
VALUES(SEQ_SIGNCOURSE.NEXTVAL, TO_DATE('2022-02-14', 'YYYY-MM-DD'), '2222222', 'OPORA001');
--==>> 1 행 이(가) 삽입되었습니다.

SELECT *
FROM TBL_SIGNCOURSE;

COMMIT;

--------------------------------------------------------------------------------
-- 성적 (TBL_SCORE)
CREATE TABLE TBL_SCORE
( SCORE_CODE        VARCHAR2(20)    CONSTRAINT SCORE_CODE_NN      NOT NULL
, ATTEND            NUMBER(3)       DEFAULT 0
                                    CONSTRAINT SCORE_ATTEND_CK    CHECK(ATTEND BETWEEN 0 AND 100)
, PRACTICE          NUMBER(3)       DEFAULT 0
                                    CONSTRAINT SCORE_PRACTICE_CK  CHECK(PRACTICE BETWEEN 0 AND 100)
, WRITE             NUMBER(3)       DEFAULT 0
                                    CONSTRAINT SCORE_WRITE_CK     CHECK(WRITE BETWEEN 0 AND 100)
, SCORE_DATE        DATE            DEFAULT SYSDATE 
                                    CONSTRAINT SCORE_SCORE_DATE_NN        NOT NULL
, OPENSUBJECT_CODE  VARCHAR2(20)    CONSTRAINT SCORE_OPENSUBJECT_CODE_NN  NOT NULL
, SIGNCOURSE_CODE   NUMBER          CONSTRAINT SCORE_SIGNCOURSE_CODE_NN   NOT NULL
, CONSTRAINT SCORE_CODE_PK PRIMARY KEY(SCORE_CODE)
);
--==>> Table TBL_SCORE이(가) 생성되었습니다.


--------------------------------------------------------------------------------
-- 중도탈락 (TBL_DROP)
CREATE TABLE TBL_DROP
(   DROP_CODE           NUMBER                      CONSTRAINT DROP_CODE_NN NOT NULL
,   DROP_DATE           DATE    DEFAULT SYSDATE     CONSTRAINT DROP_DATE_NN NOT NULL
,   SIGNCOURSE_CODE     NUMBER                      CONSTRAINT DROP_SIGNCOURSE_CODE_NN NOT NULL
,   REASON_CODE         NUMBER                      CONSTRAINT DROP_REASON_CODE_NN NOT NULL
,CONSTRAINT DROP_CODE_PK PRIMARY KEY(DROP_CODE)
);
--==>>Table TBL_DROP이(가) 생성되었습니다.


--------------------------------------------------------------------------------
-- 중도탈락사유 (TBL_DROPREASON)
CREATE TABLE TBL_DROPREASON
(   REASON_CODE    NUMBER               CONSTRAINT DROPREASON_REASON_CODE_NN NOT NULL
,   REASON         VARCHAR2(100)        CONSTRAINT DROPREASON_REASON_NN NOT NULL
,CONSTRAINT DROPREASON_REASON_CODE_PK   PRIMARY KEY(REASON_CODE)
);
--==>> Table TBL_DROPREASON이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_DROPREASON
VALUES(SEQ_DROPREASON.NEXTVAL, '무단결석5회');
INSERT INTO TBL_DROPREASON
VALUES(SEQ_DROPREASON.NEXTVAL, '시험미응시3회');
INSERT INTO TBL_DROPREASON
VALUES(SEQ_DROPREASON.NEXTVAL, '학비미납');
INSERT INTO TBL_DROPREASON
VALUES(SEQ_DROPREASON.NEXTVAL, '품행불량');
INSERT INTO TBL_DROPREASON
VALUES(SEQ_DROPREASON.NEXTVAL, '개인사유');
--==>> 1 행 이(가) 삽입되었습니다.

SELECT *
FROM TBL_DROPREASON;

COMMIT;
--------------------------------------------------------------------------------
-- 강의실 (TBL_CLASSROOM)
CREATE TABLE TBL_CLASSROOM
( CLASSROOM_CODE    VARCHAR2(20)    CONSTRAINT CLASSROOM_CODE_NN   NOT NULL   
, CLASSROOM_COMMENT VARCHAR2(100)    
, CAPACITY          NUMBER
, CONSTRAINT CLASSROOM_CODE_PK     PRIMARY KEY(CLASSROOM_CODE)
);
--==>> Table TBL_CLASSROOM이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_CLASSROOM
VALUES('A101', 'A동 101호', 30);
INSERT INTO TBL_CLASSROOM
VALUES('A201', 'A동 201호', 40);
INSERT INTO TBL_CLASSROOM
VALUES('A301', 'A동 301호', 60);
INSERT INTO TBL_CLASSROOM
VALUES('B102', 'B동 102호', 30);
INSERT INTO TBL_CLASSROOM
VALUES('B202', 'B동 202호', 40);
--==>> 1 행 이(가) 삽입되었습니다
EXEC PRC_CLASSROOM_INSERT('C101', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('C102', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('C103', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A102', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A103', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A202', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A203', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A302', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('A303', NULL, NULL);
EXEC PRC_CLASSROOM_INSERT('B101', NULL, NULL);

SELECT *
FROM TBL_CLASSROOM;

COMMIT;
--------------------------------------------------------------------------------
-- 교재 (TBL_BOOK)
CREATE TABLE TBL_BOOK
( BOOK_CODE                    VARCHAR2(20)     CONSTRAINT BOOK_CODE_NN NOT NULL
, NAME                         VARCHAR2(100)    CONSTRAINT BOOK_NAME_NN NOT NULL
, AUTHOR                       VARCHAR2(50)
, PUBLISHER                    VARCHAR2(50)
, CONSTRAINT BOOK_CODE_PK PRIMARY KEY(BOOK_CODE)
);
--==>> Table TBL_BOOK이(가) 생성되었습니다.


-- 데이터 삽입
INSERT INTO TBL_BOOK
VALUES('J001', '이것이 자바다', '김아린', '서울출판사');
INSERT INTO TBL_BOOK
VALUES('P001', '처음 시작하는 파이썬', '우호석', '경기출판사');
INSERT INTO TBL_BOOK
VALUES('O001', '그것이 오라클', '신시우', '부산출판사');
INSERT INTO TBL_BOOK
VALUES('M001', '이산수학', '최상기', '제주출판사');
INSERT INTO TBL_BOOK
VALUES('C001', '저것이 C언어다', '유수정', '경남출판사');
--==>> 1 행 이(가) 삽입되었습니다.
EXEC PRC_BOOK_INSERT('한국사대모험(상)', NULL, NULL);
EXEC PRC_BOOK_INSERT('한국사대모험(하)', NULL, NULL);
EXEC PRC_BOOK_INSERT('HTML5 웹프로그래밍 입문', '윤인성', '한빛아카데미');
EXEC PRC_BOOK_INSERT('HTML5 웹프로그래밍 응용', NULL, NULL);
EXEC PRC_BOOK_INSERT('니하오 중국어 회화(기초편)', NULL, NULL);
EXEC PRC_BOOK_INSERT('니하오 중국어 회화(기본편)', NULL, NULL);
EXEC PRC_BOOK_INSERT('니하오 중국어 회화(고급편)', NULL, NULL);
EXEC PRC_BOOK_INSERT('HELLO CODING HTML5 + CSS3', NULL, NULL);
EXEC PRC_BOOK_INSERT('TOEIC 기출문제집(1)', NULL, NULL);
EXEC PRC_BOOK_INSERT('TOEIC 기출문제집(2)', NULL, NULL);


SELECT *
FROM TBL_BOOK;

COMMIT;
--------------------------------------------------------------------------------
-- 개설과정 테이블 FOREIGN KEY 제약조건 추가
ALTER TABLE TBL_OPENCOURSE
ADD CONSTRAINT OPENCOURSE_PROFNO_FK FOREIGN KEY(PROFNO)
                REFERENCES TBL_PROFESSOR(PROFNO);
--==>> Table TBL_OPENCOURSE이(가) 변경되었습니다.

ALTER TABLE TBL_OPENCOURSE
ADD CONSTRAINT OPENCOURSE_COURSE_CODE_FK FOREIGN KEY(COURSE_CODE)
                REFERENCES TBL_COURSE(COURSE_CODE);
--==>> Table TBL_OPENCOURSE이(가) 변경되었습니다.

ALTER TABLE TBL_OPENCOURSE
ADD CONSTRAINT OPENCOURSE_CLASSROOM_CODE_FK FOREIGN KEY(CLASSROOM_CODE)
                REFERENCES TBL_CLASSROOM(CLASSROOM_CODE);
--==>> Table TBL_OPENCOURSE이(가) 변경되었습니다.


-- 개설과목 테이블 FOREIGN KEY 제약조건 추가
ALTER TABLE TBL_OPENSUBJECT
ADD ( CONSTRAINT OPENSUBJECT_OPENCOURSE_FK FOREIGN KEY(OPENCOURSE_CODE)
                 REFERENCES TBL_OPENCOURSE(OPENCOURSE_CODE)                
    , CONSTRAINT OPENSUBJECT_SUBJECT_CODE_FK FOREIGN KEY(SUBJECT_CODE)
                 REFERENCES TBL_SUBJECT(SUBJECT_CODE)                
    , CONSTRAINT OPENSUBJECT_BOOK_CODE_FK FOREIGN KEY(BOOK_CODE)
                 REFERENCES TBL_BOOK(BOOK_CODE)
    );
--==>> Table TBL_OPENSUBJECT이(가) 변경되었습니다.


-- 수강신청 테이블 FOREIGN KEY 제약조건 추가
ALTER TABLE TBL_SIGNCOURSE
ADD CONSTRAINT SIGNCOURSE_STUDNO_FK FOREIGN KEY(STUDNO)
                REFERENCES TBL_STUDENT(STUDNO);
--==>> Table TBL_SIGNCOURSE이(가) 변경되었습니다.                

ALTER TABLE TBL_SIGNCOURSE
ADD CONSTRAINT SIGNCOURSE_OPENCOURSE_CODE_FK FOREIGN KEY(OPENCOURSE_CODE)
                REFERENCES TBL_OPENCOURSE(OPENCOURSE_CODE);    
--==>> Table TBL_SIGNCOURSE이(가) 변경되었습니다.


-- 성적 테이블 FOREIGN KEY 제약조건 추가
ALTER TABLE TBL_SCORE
ADD CONSTRAINT SCORE_OPENSUBJECT_CODE_FK FOREIGN KEY(OPENSUBJECT_CODE)
                                         REFERENCES TBL_OPENSUBJECT(OPENSUBJECT_CODE);  
--==>> Table TBL_SCORE이(가) 변경되었습니다.

ALTER TABLE TBL_SCORE
ADD CONSTRAINT SCORE_SIGNCOURSE_CODE_FK FOREIGN KEY(SIGNCOURSE_CODE)
                                         REFERENCES TBL_SIGNCOURSE(SIGNCOURSE_CODE);  
--==>> Table TBL_SCORE이(가) 변경되었습니다.

-- 중도탈락 테이블 FOREIGN KEY 제약조건 추가
ALTER TABLE TBL_DROP
ADD( CONSTRAINT DROP_SIGNCOURSE_CODE_FK FOREIGN KEY(SIGNCOURSE_CODE)
                REFERENCES TBL_SIGNCOURSE(SIGNCOURSE_CODE)
   , CONSTRAINT DROP_REASON_CODE_FK FOREIGN KEY(REASON_CODE)
                REFERENCES TBL_DROPREASON(REASON_CODE)
    );    
--==>> Table TBL_DROP이(가) 변경되었습니다.   

--------------------------------------------------------------------------------

-- 시퀀스 생성

-- 수강신청
CREATE SEQUENCE SEQ_SIGNCOURSE
NOCACHE;
--==>> Sequence SEQ_SIGNCOURSE이(가) 생성되었습니다.

-- 중도탈락
CREATE SEQUENCE SEQ_DROP
NOCACHE;
--==>> Sequence SEQ_DROP이(가) 생성되었습니다.

-- 중도탈락사유
CREATE SEQUENCE SEQ_DROPREASON
NOCACHE;
--==>> Sequence SEQ_DROPREASON이(가) 생성되었습니다.

-- 과목
CREATE SEQUENCE SEQ_SUBJECT
NOCACHE;
--==>> Sequence SEQ_SUBJECT이(가) 생성되었습니다.

-- 개설 과목
CREATE SEQUENCE SEQ_OPENSUBJECT
NOCACHE;
--==>> Sequence SEQ_OPENSUBJECT이(가) 생성되었습니다.

-- 교재
CREATE SEQUENCE SEQ_BOOK
NOCACHE;
--==>> Sequence SEQ_BOOK이(가) 생성되었습니다.

-- 학생
CREATE SEQUENCE SEQ_STUDENT
NOCACHE;
--==>> Sequence SEQ_STUDENT이(가) 생성되었습니다.

-- 교수
CREATE SEQUENCE SEQ_PROFESSOR
NOCACHE;
--==>> Sequence SEQ_PROFESSOR이(가) 생성되었습니다.

-- 과정
CREATE SEQUENCE SEQ_COURSE
NOCACHE;
--==>> Sequence SEQ_COURSE이(가) 생성되었습니다.

-- 개설과정
CREATE SEQUENCE SEQ_OPENCOURSE_CODE
NOCACHE;
--==>> Sequence SEQ_OPENCOURSE_CODE이(가) 생성되었습니다.

-- 성적입력
CREATE SEQUENCE SEQ_SCORE
NOCACHE;
--==>> Sequence SEQ_SCORE이(가) 생성되었습니다.
--------------------------------------------------------------------------------

-- 제약조건 뷰 생성
CREATE OR REPLACE VIEW VIEW_CONSTCHECK
AS
SELECT UC.OWNER "OWNER"
     , UC.CONSTRAINT_NAME "CONSTRAINT_NAME"
     , UC.TABLE_NAME "TABLE_NAME"
     , UC.CONSTRAINT_TYPE "CONSTRAINT_TYPE"
     , UCC.COLUMN_NAME "COLUMN_NAME"
     , UC.SEARCH_CONDITION "SEARCH_CONDITION"
     , UC.DELETE_RULE "DELETE_RULE"
FROM USER_CONSTRAINTS UC JOIN USER_CONS_COLUMNS UCC
ON UC.CONSTRAINT_NAME = UCC.CONSTRAINT_NAME;
--==>> View VIEW_CONSTCHECK이(가) 생성되었습니다.